<div class="container my-4">

  <div class="row">
    <div class="col text-center">
      <% provide(:title,'ユーザー検索') %>
      <h4><%= @title %></h4>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <%= render 'search_form', q: @q %>
    </div>
  </div>

  <div class="row my-4 text-center">
    <div class="col">

      <% unless @members.empty? %>

      <table class="table">
        <thead>
          <th>ユーザー名</th>
          <th>在住県</th>
          <th>好きなワインのジャンル</th>
          <th>ナチュール記録数</th>
          <th>フォロー数</th>
          <th>フォロワー数</th>
          <th></th>
        </thead>
        <% @members.each do |member| %>
        <tbody>
          <td>
            <%= link_to wines_myindex_path(member) do %>
              <%= image_tag member.get_profile_image(60,60), class: "rounded-circle" %>
              <%= member.name %>
            <% end %>
          </td>
          <td><%= member.prefecture %></td>
          <td><%= member.favorite_genre %></td>
          <td><%= member.wines.count %></td>
          <td><%= member.followings.count %></td>
          <td><%= member.followers.count %></td>
          <td>
            <% if current_member != member %>
              <% if current_member.following?(member) %>
                <%= link_to "フォロー外す", member_relationships_path(member.id), method: :delete, class: "btn btn-info" %>
              <% else %>
                <%= link_to "フォローする", member_relationships_path(member.id), method: :post, class: "btn btn-success" %>
              <% end %>
            <% end %>
          </td>
        </tbody>
        <% end %>
      </table>

      <% else %>
      <p>
      ユーザーが見つかりませんでした。<br>
      お探しのユーザー名を確認してください。
      </p>
      <% end %>

    </div>
  </div>
</div>