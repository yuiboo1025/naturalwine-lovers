 <!-- ãƒŠãƒãƒ¥ãƒ¼ãƒ«è¨˜éŒ²ãƒœã‚¿ãƒ³ -->
    <%= render 'public/wines/post_wine-btn' %>

<div class="container justify-content-center wine_show_main my-4">
  <div class="row mt-5 justify-content-center wine_show ">
    <div class="wine_show_contents">
        <div class="col">
         ã€€ <%= link_to spot_path(@wine.spot) do %>
            ğŸ“<%= @wine.spot.spot_name %></br>
           <% end %>
           <%= image_tag @wine.get_wine_image(400,400) %></br>
           
           <div id= "wine_<%= @wine.id %>">
             <h4 class="wine_show__under_info d-flex justify-content-end mt-3 mr-3">
               <% if @wine.is_again == true && @wine.member == current_member %>
                <div class ="against mr-5 pr-5">
                  <i class="fas fa-star"></i>
                </div>
               <% end %>
               <div class="comments_count ml-1">
                 <%= render "public/comments/counter", wine: @wine %>
               </div>
               <div class= "favorite-btn mx-4">
                 <%= render 'public/favorites/favorite-btn', wine: @wine %>
               </div>
               <div class= "bookmark-btn">
                 <%= render 'public/bookmarks/bookmark-btn', wine: @wine %>
               </div>
             </h4>
           </div>
        </div>
        
        <div class="col mt-3">
          <table class="table">
            <tr>
              <th><%= image_tag @wine.member.get_profile_image(50,50), class: "rounded-circle" %></th>
              <td>
                <%= link_to wines_myindex_path(@wine.member.id) do %>
                  <%= @wine.member.name %>
                <% end %>
              </td>
            </tr>
            <tr>
              <th>æŠ•ç¨¿æ—¥</th>
              <td><%= @wine.created_at.strftime('%Y/%m/%d') %> </td>
            </tr>
            <tr>
              <th>å•†å“å</th>
              <td><%= @wine.wine_name%> </td>
            </tr>
            <tr>
              <th>ç”Ÿç”£å›½</th>
              <td><%= @wine.production_country %> </td>
            </tr>
            <tr>
              <th>å¹´ä»£</th>
              <td><%= @wine.production_year %> </td>
            </tr>
            <tr>
              <th>ã‚¸ãƒ£ãƒ³ãƒ«</th>
              <td><%= @wine.genre.genre_name %> </td>
            </tr>
            <tr>
              <th>è©•ä¾¡</th>
              <td><%= render "static_rate", wine: @wine %></td>
            </tr>
            <tr>
              <th>æ„Ÿæƒ³</th>
              <td><%= @wine.impression %> </td>
            </tr>
            <tr>
              <th></th>
              <% if @wine.is_again == false %>
                <td class="text-success"></td>
              <% else %>
                <td class="text-secondary">ã¾ãŸé£²ã¿ãŸã„</td>
              <% end %>
            </tr>
          </table>
          <div class="wine_show__edit_destroy_btn text-right">
            <% if @wine.member == current_member %>
              <%= link_to "ç·¨é›†", edit_wine_path(@wine), class: "wine_show__edit_btn px-2" %>
              <%= link_to "å‰Šé™¤", wine_path(@wine), method: :delete, class: "wine_show__destroy_btn px-2", "data-confirm" => "æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ" %>
          ã€€<% end %>
        ã€€</div>
        </div>
      </div>
      <div class="wine_show_map justify-content-center text-center p-4 ml-4">
        <h3>Where is...?</h3>
        <div class="wine_show_map_info mb-2 mt-5">
          <%= link_to spot_path(@wine.spot) do %>
            ğŸ“<%= @wine.spot.spot_name %></br>
          <% end %>
          ã€’<%= @wine.spot.address %>
        </div>
        <div id='map'></div>
      </div>
    </div>
  <div class="row justify-content-left mt-3">
    <div class="col-7">
      <div class="comment">
        <%= render "public/comments/comment", wine: @wine %>
      </div>
      <div class="form">
        <%= render "public/comments/form", wine: @wine, comment: @comment %>
      </div>
    </div>

  </div>
</div>

<style>
#map {
  height: 300px;
  width: 300px;
}

.wine_show_map {
  background-color: #f5deb3;
  border-radius: 70px;
}

.wine_show__edit_btn {
  border-width: 15px;
  text-underline-position: above;
  background: linear-gradient(transparent 50%, #66cdaa 0%);
  color: #555555;
  font-size: 20px;
  font-weight: bold;
}

.wine_show__destroy_btn {
  border-width: 7px;
  text-underline-position: above;
  background: linear-gradient(transparent 50%, #ffa07a 0%);
  color: #555555;
  font-size: 20px;
  font-weight: bold;
}

.wine_show_map_info {
  width: 300px;
}

</style>

<!-- jséƒ¨åˆ† -->
<script>
//åˆæœŸãƒãƒƒãƒ—ã®è¨­å®š
let map
let marker
function initMap(){
  geocoder = new google.maps.Geocoder()

  map = new google.maps.Map(document.getElementById('map'), {
    center:  {lat: <%= @wine.spot.lat %>, lng: <%= @wine.spot.lng %>},
    zoom: 15,
  });

   marker = new google.maps.Marker({
    position:  {lat: <%= @wine.spot.lat %>, lng: <%= @wine.spot.lng %>},
    map: map
  });
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAP_API_KEY']%>&callback=initMap" async defer></script>
