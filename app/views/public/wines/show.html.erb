 <!-- ナチュール記録ボタン -->
    <%= render 'public/wines/post_wine-btn' %>

<div class="container justify-content-center wine_show_main my-4">
  <div class="row mt-5 justify-content-center wine_show ">
    <div class="wine_show_contents">
        <div class="col">
          📍<%= @wine.spot.spot_name %></br>
           〒<%= @wine.spot.address %></br>
           <%= image_tag @wine.get_wine_image(400,400) %></br>
           
           <div id= "wine_<%= @wine.id %>">
             <h4 class="wine_show__favorite_comment d-flex justify-content-end mt-3">
               <div class="comments-count">
                 <%= render "public/comments/counter", wine: @wine %>
               </div>
               <div class= "favorite-btn mx-4">
                 <%= render 'public/favorites/favorite-btn', wine: @wine %>
               </div>
               <div class= "bookmark-btn">
                 <%= render 'public/bookmarks/bookmark-btn', wine: @wine %>
               </div>
             </h4>
           </div>
        </div>
        
        <div class="col mt-5">
          <table class="table">
            <tr>
              <th><%= image_tag @wine.member.get_profile_image(50,50), class: "rounded-circle" %></th>
              <td><%= @wine.member.name %></td>
            </tr>
            <tr>
              <th>投稿日</th>
              <td><%= @wine.created_at.strftime('%Y/%m/%d') %> </td>
            </tr>
            <tr>
              <th>生産国</th>
              <td><%= @wine.production_country %> </td>
            </tr>
            <tr>
              <th>年代</th>
              <td><%= @wine.production_year %> </td>
            </tr>
            <tr>
              <th>ジャンル</th>
              <td><%= @wine.genre.genre_name %> </td>
            </tr>
            <tr>
              <th>評価</th>
              <td><%= render "static_rate", wine: @wine %></td>
            </tr>
            <tr>
              <th>感想</th>
              <td><%= @wine.impression %> </td>
            </tr>
            <tr>
              <th></th>
              <% if @wine.is_again == false %>
                <td class="text-success"></td>
              <% else %>
                <td class="text-secondary">また飲みたい</td>
              <% end %>
            </tr>
          </table>
          <div class="wine_show__update_destroy_btn">
            <% if @wine.member == current_member %>
              <%= link_to "編集", edit_wine_path(@wine) %>
              <%= link_to "削除", wine_path(@wine), method: :delete, "data-confirm" => "本当に削除しますか？" %>
          　<% end %>
        　</div>
        </div>
      </div>
      <div class="wine_show_map justify-content-center text-center p-4 ml-4">
        <h3>Where is...?</h3>
        <div class="mb-2 mt-5">📍<%= @wine.spot.spot_name %></div>
        <div id='map'></div>
      </div>
    </div>
  <div class="row justify-content-left mt-3">
    <div class="col-7">
      <div class="comment">
        <%= render "public/comments/comment", wine: @wine %>
      </div>
      <div class="form">
        <%= render "public/comments/form", wine: @wine, comment: @comment %>
      </div>
    </div>

  </div>
</div>

<style>
#map {
  height: 300px;
  width: 300px;
}

.wine_show_map {
  background-color: #f5deb3;
  border-radius: 70px;
}
</style>

<!-- js部分 -->
<script>
//初期マップの設定
let map
let marker
function initMap(){
  geocoder = new google.maps.Geocoder()

  map = new google.maps.Map(document.getElementById('map'), {
    center:  {lat: <%= @wine.spot.lat %>, lng: <%= @wine.spot.lng %>},
    zoom: 15,
  });

   marker = new google.maps.Marker({
    position:  {lat: <%= @wine.spot.lat %>, lng: <%= @wine.spot.lng %>},
    map: map
  });
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyANVEZaOAVmsA5IxBWxHuUDOy-5qzjluGI&callback=initMap" async defer></script>
